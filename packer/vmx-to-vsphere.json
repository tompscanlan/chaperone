{
  "variables": {
    "version": "0.2",
    "role": "chaperone",
    "ssh_username": "vmware",
    "ssh_password": "VMware1!",

    "vsphere_cluster": "ClusterA",
    "vsphere_datacenter": "Datacenter",
    "datastore": "nfs01",
    "vsphere_host": "vcsa-01a.vsphere.local",
    "vsphere_password": "VMware1!",
    "vsphere_username": "administrator@home.local",

    "vmx": "base-vmware/chaperone.vmx"
  },
  "builders": [
    {
      "type": "vmware-vmx",
      "source_path": "{{user `vmx`}}",
      "ssh_username": "{{user `ssh_username`}}",
      "ssh_password": "{{user `ssh_password`}}",
      "shutdown_command": "sudo systemctl poweroff"

    }
  ],
  "post-processors": [
    [
      {
        "type": "vsphere",
        "cluster": "{{user `vsphere_cluster` }}",
        "datacenter": "{{user `vsphere_datacenter`}}",
        "datastore": "{{user `datastore`}}",
        "host": "{{user `vsphere_host`}}",
        "password": "{{user `vsphere_password`}}",
        "username": "{{user `vsphere_username`}}",
        "vm_name": "{{user `role`}}-{{user `version`}}"
      }
    ]
  ]
}
